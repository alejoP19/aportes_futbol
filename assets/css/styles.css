/* =====================================================
   VARIABLES
===================================================== */
:root {
  --aside-width: 260px;
  --aside-narrow: 200px;
  --topbar-bg: #8d9cbd;
  --primary-blue: #1c4b9e;
  --danger-red: #fa0505;
  --pdf-red: #fa0526;
  --success-green: #00f94fc5;
  --border: #7c7c7cd2;
  --light-gray: #f5f5f5;
}

/* =====================================================
   BASE
===================================================== */
* { box-sizing: border-box; }
body{
  font-family: "Lucida Sans Unicode", sans-serif;
  padding: 0;
  margin: 0;
  overflow-x: hidden;
}

/* =====================================================
   HEADER (MÓVIL: MOBILE-FIRST)
===================================================== */
.topbar {
  display: grid;
  grid-template-columns: 1fr;
  grid-template-areas:
    "year"
    "month"
    "logo"
    "title"
    "btn";
  gap: 15px;
  padding: 22px 15px;
  margin: 1px 1px;
  background: var(--topbar-bg);
  border-bottom: 1px solid var(--border);
  text-align: center;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
  align-items: center;
}

.brand { grid-area: logo; display:flex; justify-content:center; align-items:center; gap:5px; margin-top:0; }
.title { grid-area: title; }
.toggle-left-panel { grid-area: btn; justify-self:center; }

.logo { width: 40%; border-radius: 8px; object-fit: cover; }
.title h1 { margin:auto; font-size:26px; font-weight:lighter; color:white; text-shadow: -1px 1px 2px rgba(0,0,0,0.8), -1px 1px 1px rgba(0,0,0,0.6); }
.subtitle { text-shadow: -1px 1px 1px black; font-size:18px; color:#fdff76; }

.toggle-left-panel {
  display: flex;
  position: relative;
  bottom: -35%;
  left: -1%;
  width: 100%;
  justify-content: center;
  padding: 8px 20px;
  background-color: #fffffff6;
  color: rgba(0,0,0,0.888);
  text-shadow: -1px 1px 1px #ffffff;
  font-weight: lighter;
  border-radius: 10px;
  outline: 0;
  transition: background-color 0.5s, border-radius 0.5s, outline 0.5s;
  font-size: 16px;
}
.toggle-left-panel:hover {
  background-color: rgba(236,236,236,0.719);
  color: rgb(255,255,255);
  text-shadow: -1px 1px 1px #000000;
  box-shadow: 0 0 20px rgba(230,241,255,1);
  border-radius: 25px;
  padding: 8px 19px;
}

.date-selectors { grid-area: month; display:inline-flex; justify-self:flex-end; margin-top:-4%; gap:8px; }
.year { grid-area: year; }
.month { grid-area: month; }
.year label, .month label { color:white; font-weight:lighter; text-shadow: -1px 1px 1px rgba(0,0,0,0.7); }
select { width:80%; padding:6px; border:1px solid #aaa; border-radius:8px; }

/* =====================================================
   LAYOUT PRINCIPAL (mobile-first)
===================================================== */
.container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 15px;
  padding: 15px;
}

/* paneles */
.left-panel, .middle-panel, .right-panel {
  background: #f0f0f0;
  border-radius: 8px;
  border: 1px solid var(--border);
  padding: 15px;
  width: 98%;
  justify-self: center;
}

/* tabla oculta por defecto */
.middle-panel { display: none; }

/* panel izquierdo colapsado */
.container.panel-collapsed .left-panel {
  width: 0;
  opacity: 0;
  pointer-events: none;
  transition: all 0.3s ease;
}
/* Tabla expandida */
.middle-panel.expanded {
    display: block !important;
    width: 100%;
    height: auto; /* altura dinámica */
    max-height: calc(100vh - 100px); /* 100px: espacio aproximado para header */
    overflow-y: auto;
    overflow-x: auto;
    padding: 15px;
    background: #f0f0f0;
    border-radius: 8px;
}

/* Móvil */
@media (max-width: 991px) {
    .middle-panel.expanded {
        max-height: calc(100vh - 140px); /* dejar espacio para header y botón */
        margin-top: 85%;
    }

    .toggle-left-panel {
        position: relative;
        top: 0;
        right: 0;
        margin-bottom: 10px;
        z-index: auto;
    }
}

/* =====================================================
   BOTONES / FORMULARIOS
===================================================== */
.add-player-box { margin-top:10px; }
.add-player-title { margin-top:1%; font-size:18px; margin-bottom:15px; font-weight:lighter; color:rgb(0,0,0); font-style:italic; text-shadow: -1px 1px 1px #fff; }
.add-player-box input { width:94%; padding:9px; border:1px solid #bbb; border-radius:8px; margin-bottom:8px; }
.save-player-btn { display:flex; margin:auto; width:90%; margin-top:8%; justify-content:center; padding:8px 40px; background-color:#00f94fc5; color:rgba(0,0,0,0.888); outline:0; font-size:16px; border-radius:10px; transition: .3s; }
.save-player-btn:hover { background-color: rgba(235,235,235,0.242); outline:2px solid rgba(0,255,94,0.596); color:#000; border-radius:25px; box-shadow:0 0 20px rgba(84,250,134,0.15); padding:7px 39px; }

/* right panel cards */
.right-panel { border:1px solid var(--border); border-radius:8px; width:100%; padding:13px; margin-bottom:20px; }
.totals-card{ background:#fff; border:1px solid var(--border); border-radius:8px; padding:12px; margin-bottom:15px; font-weight:lighter; }
.totals-card h3{ font-weight:lighter; font-style:italic; }
.otros-aportes-card{
     background:#c0c09f; 
     border:1px solid var(--border); 
     border-radius:8px; 
     padding:12px; 
     margin-bottom:10px ; 
    margin: auto;
    min-width: 90%; }
.otros-aportes-card h4{ font-size:18px; margin-bottom:13px; margin-top:3%; font-weight:lighter; color:#000; font-style:italic; text-shadow:-1px 1px 1px #fff; }
.otros-aportes-card input, .otros-aportes-card { width:93%; padding:9px; border-radius:8px; border:1px solid #bbb; margin-bottom:10px; }
.otros-aportes-card select { width:100%; padding:9px; border-radius:8px; border:1px solid #bbb; margin-bottom:10px; }
.otro-aporte{ background:var(--primary-blue); display:flex; margin:auto; width:90%; margin-top:8%; justify-content:center; padding:8px 40px; color:rgba(255,255,255,0.888); outline:0; border-radius:10px; font-size:16px; }
.otro-aporte:hover { background-color: rgba(235,235,235,0.242); outline:2px solid rgba(0,204,255,0.596); color:#000; border-radius:25px; box-shadow:0 0 20px rgba(84,225,250,0.15); padding:7px 39px; }

.notes-card{ background:#c4c3c3; border:1px solid var(--border); border-radius:8px; padding:12px; margin-bottom:15px; }
.notes-card h4{ font-size:18px; margin-bottom:13px; margin-top:3%; font-weight:lighter; color:#000; font-style:italic; text-shadow:-1px 1px 1px #fff; }

.export-pdf-butt{ background:var(--pdf-red); display:flex; width:80%; margin:auto; margin-top:8%; justify-content:center; padding:8px 20px; color:rgba(255,255,255,0.888); outline:0; border-radius:10px; font-size:16px; }
.export-pdf-butt:hover{ background-color: rgba(235,235,235,0.242); outline:2px solid rgba(0,204,255,0.596); color:#000; border-radius:25px; box-shadow:0 0 20px rgba(84,225,250,0.15); padding:7px 39px; }

/* fila seleccionada tabla */
tr.selected-row { background: #eaf1ff !important; box-shadow: inset 0 0 8px rgba(28,75,158,0.35); border-left:4px solid var(--primary-blue); transition:0.2s; }

/* WRAPPERS PARA TABLA */
.table-wrap { width: 100%; display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; max-width: 100%; }
.table-wrap table { min-width: 700px; width: auto; border-collapse: collapse; }
.middle-panel { overflow-x: hidden; transition: all 0.3s ease; }

/* CLASE NUEVA: tabla expandida al presionar boton */
.middle-panel.expanded {
    display: block !important;
    position: absolute;
    top: 100px; /* debajo del header */
    left: 0;
    width: 100vw;
    max-width: 100%;
    z-index: 999;
    background: #f0f0f0;
    padding: 15px;
    border-radius: 0;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* Móvil scroll horizontal */
@media (max-width: 991px) {
  .table-wrap { overflow-x: auto; }
  .middle-panel { overflow-x: hidden; }
  .right-panel, .left-panel, .notes-card { max-width: 100vw; overflow-x: hidden; }
}

/* Hover */
#monthlyTableContainer table tr:hover { background-color: #f0f8ff; cursor: pointer; }
#monthlyTableContainer table tr.selected-row { background-color: #c0e0ff; }
#monthlyTableContainer table tr { transition: background-color 0.2s ease; }

/* Desktop layout */
@media (min-width: 992px) {
  .topbar { grid-template-areas: "brand btn title selects"; grid-template-columns: auto auto 1fr auto; align-items: center; gap: 20px; padding: 20px 30px; min-height: 15dvh; }
  .brand { grid-area: brand; justify-content:flex-start; }
  .toggle-left-panel { grid-area: btn; position: static; bottom: auto; left: auto; width: auto; justify-self:flex-start; }
  .title { grid-area: title; position: static; display:flex; flex-direction:column; align-items:center; }
  .date-selectors { grid-area: selects; justify-self:flex-end; display:flex; gap:10px; align-items:center; margin-top:0; }
  .logo { width: 64px; }
  .title h1 { font-size: 35px; }
  .subtitle { font-size: 16px; }
  .container { grid-template-columns: 300px 1fr var(--aside-width); padding: 15px; }
  .container.panel-collapsed { grid-template-columns: 1fr var(--aside-width) !important; padding-left: 0 !important; padding-right: 0 !important; gap: 10px; }
  .right-panel { justify-self: end; }
  .header-title { text-align: center; font-size: 22px; }
  .header-selects select { min-width: 140px; width: 140px; }
}
@media (min-width: 1200px) {
  .container { grid-template-columns: 320px 1fr var(--aside-width); }
}
