<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <title>Aportes ‚Äì P√∫blico</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/public.css">
  <link rel="stylesheet" href="../assets/css/login_admin.css">
</head>

<body>

  <header class="topbar">
    <div class="brand">
      <img src="../assets/img/reliquias_logo.jpg" class="logo" alt="logo">
    </div>

    <div class="titles">
      <h1>Aportes</h1>
      <h3>Las Reliquias del F√∫tbol</h3>
    </div>

    <div class="actions-butt-right">
      <a href="index.php" class="volver-butt">Regresar</a>

    </div>
  </header>

  <section class="admin-card">
    <h2 class="title-admin-form">Ingreso a Panel de Administraci√≥n</h2>



    <label class="subtitle-form">Ingresa Tus Credenciales</label>
   <form id="loginForm" class="admin-form">
  <label class="title-labels-form">Correo</label>
  <input type="email" name="email" class="form-control" required>

  <label class="title-labels-form">Contrase√±a</label>
<div class="password-wrapper">
  <input type="password" id="loginPass" name="password" class="form-control" required>
  <span class="toggle-pass" data-target="loginPass">üëÅÔ∏è</span>
</div>

  <a class="recover__password__btn"
     href="/aportes_futbol/backend/auth/send_recover_email.html">
    Recuperar Contrase√±a
  </a>

  <button type="submit" class="ingresar-butt">Ingresar</button>
</form>



  </section>


  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

<script>
(function () {
  const form = document.getElementById("loginForm");
  if (!form) return;

  // OJITO
  document.querySelectorAll(".toggle-pass").forEach(btn => {
    btn.addEventListener("click", () => {
      const input = document.getElementById(btn.dataset.target);
      if (!input) return;
      input.type = (input.type === "password") ? "text" : "password";
    });
  });

  // LOGIN
  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    try {
      const data = new FormData(form);

      const r = await fetch("/aportes_futbol/backend/auth/login.php", {
        method: "POST",
        body: data
      });

      const txt = (await r.text()).trim();

      if (txt === "OK") {
        window.location.href = "/aportes_futbol/index.php"
      } else {
        Swal.fire({
          icon: "error",
          title: "¬°Error en Credenciales!",
          text: "Correo o Contrase√±a Incorrectos"
        });
      }
    } catch (err) {
      console.error(err);
      Swal.fire("Error", "Fall√≥ la petici√≥n al servidor", "error");
    }
  });
})();
</script>
</body>

</html>

