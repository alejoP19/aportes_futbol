He implementado todas las mejoras que pediste y volvÃ­ a empaquetar el proyecto:

QuÃ© aÃ±adÃ­ y cambiÃ© (resumen)

âœ… Login de administrador (login.php, logout.php) â€” credenciales por defecto admin / admin123 (cÃ¡mbialas en config.php o usa variables de entorno en Hostinger).

âœ… EdiciÃ³n solo para admin â€” las celdas se muestran como inputs numÃ©ricos solo si has iniciado sesiÃ³n como admin; usuarios sin sesiÃ³n verÃ¡n los valores en modo solo lectura y no podrÃ¡n modificarlos.

âœ… ValidaciÃ³n en cliente â€” inputs numÃ©ricos, no permiten valores negativos; notificaciÃ³n si hay error.

âœ… Exportar CSV (api/export_csv.php) â€” descarga los aportes del mes seleccionado.

âœ… Mejoras visuales â€” ajustes de colores, tipografÃ­a, tamaÃ±os y estilos basados en la imagen que me enviaste.

âœ… ProtecciÃ³n en el servidor â€” el endpoint que actualiza aportes (api/save_contribution.php) permite crear aportes a cualquiera, pero solo permite actualizar aportes si la sesiÃ³n es admin. El endpoint de borrar jugadores requiere admin.

âœ… README actualizado con instrucciones y notas de seguridad.

Descarga el paquete actualizado: Descargar proyecto actualizado (aportes_hostinger_updated.zip)

Siguientes pasos que puedo hacer ahora (elige uno o varios):

A: AÃ±adir formulario para cambiar la contraseÃ±a del admin desde la interfaz.

B: AÃ±adir exportar a PDF automÃ¡tico (usar una librerÃ­a PHP como TCPDF) y generar desde el servidor.

C: AÃ±adir control de usuarios (roles) y registro de auditorÃ­a de cambios (quiÃ©n editÃ³ quÃ© y cuÃ¡ndo).

D: AÃ±adir botÃ³n para imprimir la vista mensual con diseÃ±o A4 optimizado.

E: Hacer pequeÃ±os ajustes de diseÃ±o (colores exactos si me das hex, tipografÃ­a exacta si me das nombre).

Â¿CuÃ¡l quieres que haga ahora?




ğŸ“Œ Cuando lo subas a Hostinger...

Vas a tener que cambiar a los datos del hosting:

HOST â†’ suele ser algo como: mysql.hostinger.com

USUARIO â†’ el que tÃº creas

CONTRASEÃ‘A â†’ la que pongas

BASE â†’ la que crees

PUERTO â†’ generalmente 3306

Te puedo dejar preparado un config_hostinger.php si quieres.




/* =========================================================
   ğŸ”µ CORRECCIÃ“N 1 â€” TABLA CON SCROLL HORIZONTAL EN MÃ“VIL
========================================================= */
.table-wrap {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 10px;
}

.table-wrap table {
  min-width: 650px; /* evita romper el layout */
}

/* =========================================================
   ğŸ”µ CORRECCIÃ“N 2 â€” HEADER EN MODO LAPTOP (ALINEADO)
========================================================= */
@media (min-width: 992px) {

  .topbar {
    display: grid;
    grid-template-columns: auto auto 1fr auto auto;
    grid-template-areas:
        "logo btn title year month";
    gap: 20px;
    align-items: center;

    /* â­ Nuevo: se expande siempre al 100% */
    width: 100%;
  }

  /* Logo */
  .brand {
    grid-area: logo;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  /* BotÃ³n al lado del logo */
  .toggle-left-panel {
    grid-area: btn;
    width: auto !important;
    white-space: nowrap;
  }

  /* TÃ­tulo centrado */
  .title {
    grid-area: title;
    text-align: center;
  }

  /* AÃ±o y Mes alineados a la derecha */
  .year { 
    grid-area: year;
    justify-self: end;
  }
  .month { 
    grid-area: month;
    justify-self: end;
  }
}

/* =========================================================
   ğŸ”µ CORRECCIÃ“N 3 â€” HEADER FULL WIDTH AL MOSTRAR LA TABLA
========================================================= */

.container.panel-collapsed .topbar {
  width: 100% !important;
}

body, html {
  width: 100%;
  overflow-x: hidden; /* evita el bug de ancho */
}




backend/
â”œâ”€ auth/          <-- para login y auth.php
â”‚   â”œâ”€ login.php
â”‚   â”œâ”€ login_action.php
â”‚   â””â”€ auth.php
â”œâ”€ aportes/       <-- para todo lo relacionado con aportes
â”‚   â”œâ”€ add_otro_aporte.php
â”‚   â”œâ”€ guardar_aporte.php
â”‚   â””â”€ delete_aporte.php
â”œâ”€ players/       <-- para jugadores
â”‚   â”œâ”€ add_player.php
â”‚   â”œâ”€ delete_player.php
â”‚   â””â”€ get_players.php
â”œâ”€ reportes/
â”‚   â”œâ”€ reporte_mes.php
â”‚   â”œâ”€ export_pdf.php
â”‚   â””â”€ preview_pdf.php


<!-- <?php
include "../../conexion.php";

$nombre = "Admin";
$email = "admin@correo.com";
$password = password_hash("123456", PASSWORD_DEFAULT);
$rol = "administrador";

$conexion->query("
    INSERT INTO usuarios (nombre,email,password,rol)
    VALUES ('$nombre','$email','$password','$rol')
");

echo "Administrador creado correctamente"; -->



ob_start();
include realpath(__DIR__ . "/reporte_mes_publico.php");
$html = ob_get_clean();

require_once realpath(__DIR__ . "/../../dompdf_2-0-3/dompdf/autoload.inc.php");
use Dompdf\Dompdf;
use Dompdf\Options;

$cssPath =realpath(__DIR__ . "/../../backend/reportes/reporte_pdf.css");
$css = file_get_contents($cssPath);

$canvas = $dompdf->get_canvas();
$logoPath = realpath(__DIR__ . "/../../assets/img/reliquias_logo.jpg");
$logoWidth = 80;
$logoY = 105;
$meses = [
    1=>"Enero",2=>"Febrero",3=>"Marzo",4=>"Abril",5=>"Mayo",6=>"Junio",
    7=>"Julio",8=>"Agosto",9=>"Septiembre",10=>"Octubre",11=>"Noviembre",12=>"Diciembre"
];
$mesName = $meses[$mes];


if (!file_exists($logoPath)) {
    $logoPath = realpath(__DIR__ . "/../../assets/img/reliquias_logo.jpg");
}







?php
include __DIR__ . "/../../conexion.php";

$mes  = isset($_GET['mes'])  ? intval($_GET['mes'])  : intval(date("n"));
$anio = isset($_GET['anio']) ? intval($_GET['anio']) : intval(date("Y"));

if ($mes < 1 || $mes > 12)  $mes  = intval(date("n"));
if ($anio < 1900)          $anio = intval(date("Y"));

// para que reporte_mes.php reciba los mismos valores
$_GET['mes']  = $mes;
$_GET['anio'] = $anio;

// --- renderizar HTML del reporte ---
ob_start();
include __DIR__ . "/reporte_mes.php";
$html = ob_get_clean();

// --- Dompdf ---
require_once __DIR__ . "/../../dompdf_2-0-3/dompdf/vendor/autoload.php";

use Dompdf\Dompdf;
use Dompdf\Options;

$options = new Options();
$options->set("isRemoteEnabled", true);
$options->set("isHtml5ParserEnabled", true);
$options->set("defaultFont", "DejaVu Sans");

$dompdf = new Dompdf($options);

// CSS del reporte
$cssPath = __DIR__ . "/reporte_pdf.css";
$css     = file_get_contents($cssPath);

$html = "<style>{$css}</style>" . $html;

$dompdf->loadHtml($html);
$dompdf->setPaper("A4", "portrait");
$dompdf->render();

// ============ ENCABEZADO Y PIE EN TODAS LAS PÃGINAS ============
$canvas   = $dompdf->get_canvas();
$logoPath = __DIR__ . "/../../assets/img/reliquias_logo.jpg";

if (!file_exists($logoPath)) {
    // fallback opcional
    $logoPath = __DIR__ . "/../../assets/img/default_logo.png";
}

$logoWidth = 80;
$logoY     = 100;  // un poco mÃ¡s arriba para que nunca tape la tabla

$meses = [
    1=>"Enero",2=>"Febrero",3=>"Marzo",4=>"Abril",5=>"Mayo",6=>"Junio",
    7=>"Julio",8=>"Agosto",9=>"Septiembre",10=>"Octubre",11=>"Noviembre",12=>"Diciembre"
];
$mesName = $meses[$mes];

$canvas->page_script(function($pageNumber, $pageCount, $canvas, $fontMetrics)
        use ($logoPath, $logoWidth, $logoY, $mesName, $anio) {

    $w = $canvas->get_width();
    $h = $canvas->get_height();

    // Logo centrado arriba
    if (file_exists($logoPath)) {
        $canvas->image($logoPath, ($w - $logoWidth) / 2, $logoY, $logoWidth, null);
    }

    // TÃ­tulo del reporte
    $canvas->text($w / 2 - 140, $logoY +15, "Reporte Mensual - {$mesName} {$anio}", null, 14);


    // Fecha en esquina superior derecha
 $canvas->text($w - 120, $logoY -65, date("Y-m-d"), null, 11);


    // Pie de pÃ¡gina
    $canvas->page_text(20,     $h - 30, "Aportes - Reliquias Del FÃºtbol", null, 9, [0,0,0]);
    $canvas->page_text($w-140, $h - 30, "PÃ¡gina {PAGE_NUM} de {PAGE_COUNT}", null, 9, [0,0,0]);
});

// Nombre del archivo descargado
$fileName = "Reporte_{$mesName}_{$anio}.pdf";
$dompdf->stream($fileName, ["Attachment" => true]);
exit;


ğŸ‘‰ SÃ­, con estas 3 reglas de oro:
ğŸŸ¢ REGLA 1

Nunca vuelvas a calcular saldo con:

$total_aportes - ($total_juegos * 2000)


Ese cÃ¡lculo quedÃ³ obsoleto para siempre en tu sistema.

ğŸŸ¢ REGLA 2

Todo saldo debe salir SIEMPRE de una funciÃ³n como esta:

get_saldo_hasta_mes($conexion, $id, $mes, $anio)


Si maÃ±ana haces:

otro PDF

un reporte anual

un resumen por jugador

ğŸ‘‰ usas esa funciÃ³n o la replicas igual, nada mÃ¡s.

ğŸŸ¢ REGLA 3

El JS no toca saldos

No suma

No resta

No interpreta

Solo muestra lo que viene del backend.

ğŸš¨ Â¿CUÃNDO SE ROMPERÃA EN EL FUTURO?

Solo en estos casos (para que los evites):

âŒ alguien:

copia cÃ³digo viejo

vuelve a usar COUNT(aportes) * 2000

calcula saldo â€œrÃ¡pidoâ€ en el frontend

ignora fecha_consumo

Mientras no pase eso â†’ tu sistema es estable.






REGLA DE ORO (para PDFs tambiÃ©n)

Desde ahora:

âŒ Nunca calcules saldo en PDFs con

SUM(aporte_principal) - COUNT(*) * 2000


âŒ Nunca ignores aportes_saldo_moves

âœ… Todo saldo (UI, pÃºblico, PDF, exportes)
debe usar esta misma lÃ³gica.

Si quieres, en el siguiente mensaje hacemos lo mismo con el PDF pÃºblico (es casi idÃ©ntico el cambio y serÃ¡ rÃ¡pido).






ğŸš¨ Reglas de oro (guÃ¡rdalas)

âŒ No confÃ­es en title para mÃ³viles
âŒ No mezcles lÃ³gica de UI en PHP
âŒ No uses touchstart suelto (es inconsistente)

âœ… Usa pointerup
âœ… Usa data-* para pasar datos
âœ… JS decide cÃ³mo mostrar