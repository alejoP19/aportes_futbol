He implementado todas las mejoras que pediste y volv√≠ a empaquetar el proyecto:

Qu√© a√±ad√≠ y cambi√© (resumen)

‚úÖ Login de administrador (login.php, logout.php) ‚Äî credenciales por defecto admin / admin123 (c√°mbialas en config.php o usa variables de entorno en Hostinger).

‚úÖ Edici√≥n solo para admin ‚Äî las celdas se muestran como inputs num√©ricos solo si has iniciado sesi√≥n como admin; usuarios sin sesi√≥n ver√°n los valores en modo solo lectura y no podr√°n modificarlos.

‚úÖ Validaci√≥n en cliente ‚Äî inputs num√©ricos, no permiten valores negativos; notificaci√≥n si hay error.

‚úÖ Exportar CSV (api/export_csv.php) ‚Äî descarga los aportes del mes seleccionado.

‚úÖ Mejoras visuales ‚Äî ajustes de colores, tipograf√≠a, tama√±os y estilos basados en la imagen que me enviaste.

‚úÖ Protecci√≥n en el servidor ‚Äî el endpoint que actualiza aportes (api/save_contribution.php) permite crear aportes a cualquiera, pero solo permite actualizar aportes si la sesi√≥n es admin. El endpoint de borrar jugadores requiere admin.

‚úÖ README actualizado con instrucciones y notas de seguridad.

Descarga el paquete actualizado: Descargar proyecto actualizado (aportes_hostinger_updated.zip)

Siguientes pasos que puedo hacer ahora (elige uno o varios):

A: A√±adir formulario para cambiar la contrase√±a del admin desde la interfaz.

B: A√±adir exportar a PDF autom√°tico (usar una librer√≠a PHP como TCPDF) y generar desde el servidor.

C: A√±adir control de usuarios (roles) y registro de auditor√≠a de cambios (qui√©n edit√≥ qu√© y cu√°ndo).

D: A√±adir bot√≥n para imprimir la vista mensual con dise√±o A4 optimizado.

E: Hacer peque√±os ajustes de dise√±o (colores exactos si me das hex, tipograf√≠a exacta si me das nombre).

¬øCu√°l quieres que haga ahora?




üìå Cuando lo subas a Hostinger...

Vas a tener que cambiar a los datos del hosting:

HOST ‚Üí suele ser algo como: mysql.hostinger.com

USUARIO ‚Üí el que t√∫ creas

CONTRASE√ëA ‚Üí la que pongas

BASE ‚Üí la que crees

PUERTO ‚Üí generalmente 3306

Te puedo dejar preparado un config_hostinger.php si quieres.




/* =========================================================
   üîµ CORRECCI√ìN 1 ‚Äî TABLA CON SCROLL HORIZONTAL EN M√ìVIL
========================================================= */
.table-wrap {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 10px;
}

.table-wrap table {
  min-width: 650px; /* evita romper el layout */
}

/* =========================================================
   üîµ CORRECCI√ìN 2 ‚Äî HEADER EN MODO LAPTOP (ALINEADO)
========================================================= */
@media (min-width: 992px) {

  .topbar {
    display: grid;
    grid-template-columns: auto auto 1fr auto auto;
    grid-template-areas:
        "logo btn title year month";
    gap: 20px;
    align-items: center;

    /* ‚≠ê Nuevo: se expande siempre al 100% */
    width: 100%;
  }

  /* Logo */
  .brand {
    grid-area: logo;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  /* Bot√≥n al lado del logo */
  .toggle-left-panel {
    grid-area: btn;
    width: auto !important;
    white-space: nowrap;
  }

  /* T√≠tulo centrado */
  .title {
    grid-area: title;
    text-align: center;
  }

  /* A√±o y Mes alineados a la derecha */
  .year { 
    grid-area: year;
    justify-self: end;
  }
  .month { 
    grid-area: month;
    justify-self: end;
  }
}

/* =========================================================
   üîµ CORRECCI√ìN 3 ‚Äî HEADER FULL WIDTH AL MOSTRAR LA TABLA
========================================================= */

.container.panel-collapsed .topbar {
  width: 100% !important;
}

body, html {
  width: 100%;
  overflow-x: hidden; /* evita el bug de ancho */
}




backend/
‚îú‚îÄ auth/          <-- para login y auth.php
‚îÇ   ‚îú‚îÄ login.php
‚îÇ   ‚îú‚îÄ login_action.php
‚îÇ   ‚îî‚îÄ auth.php
‚îú‚îÄ aportes/       <-- para todo lo relacionado con aportes
‚îÇ   ‚îú‚îÄ add_otro_aporte.php
‚îÇ   ‚îú‚îÄ guardar_aporte.php
‚îÇ   ‚îî‚îÄ delete_aporte.php
‚îú‚îÄ players/       <-- para jugadores
‚îÇ   ‚îú‚îÄ add_player.php
‚îÇ   ‚îú‚îÄ delete_player.php
‚îÇ   ‚îî‚îÄ get_players.php
‚îú‚îÄ reportes/
‚îÇ   ‚îú‚îÄ reporte_mes.php
‚îÇ   ‚îú‚îÄ export_pdf.php
‚îÇ   ‚îî‚îÄ preview_pdf.php


<!-- <?php
include "../../conexion.php";

$nombre = "Admin";
$email = "admin@correo.com";
$password = password_hash("123456", PASSWORD_DEFAULT);
$rol = "administrador";

$conexion->query("
    INSERT INTO usuarios (nombre,email,password,rol)
    VALUES ('$nombre','$email','$password','$rol')
");

echo "Administrador creado correctamente"; -->





?php
// public/public_reportes/export_pdf_publico.php
ini_set('display_errors', 1);
error_reporting(E_ALL);

// --- Cargar DOMPDF ---
$dompdfAutoload = realpath(__DIR__ . "/../../dompdf_2-0-3/dompdf/autoload.inc.php");
if (!$dompdfAutoload || !file_exists($dompdfAutoload)) {
    throw new Exception("No se encontr√≥ DOMPDF autoload en: $dompdfAutoload");
}
require_once $dompdfAutoload;

// --- IMPORTANTE: los use DEBEN IR AQU√ç ---
use Dompdf\Dompdf;
use Dompdf\Options;

try {

    // Ejecutar PHP ‚Üí HTML
    $htmlFile = realpath(__DIR__ . "/reporte_mes_publico.php");
    if (!$htmlFile) throw new Exception("No se encontr√≥ reporte HTML.");
    ob_start();
    include $htmlFile;
    $htmlContent = ob_get_clean();

    // CSS
    $cssPath = realpath(__DIR__ . "/../../backend/reportes/reporte_pdf.css");
    if (!$cssPath) throw new Exception("No se encontr√≥ CSS.");
    $cssContent = file_get_contents($cssPath);

    // Convertir logo a base64
    $logo = realpath(__DIR__ . "/../../assets/img/reliquias_logo.jpg");
    if (!$logo) throw new Exception("No se encontr√≥ logo.");
    $info = getimagesize($logo);
    $mime = $info["mime"];
    $base64 = base64_encode(file_get_contents($logo));
    $logoTag = '<img src="data:' . $mime . ';base64,' . $base64 . '" width="120">';

    // Insertar logo
    $htmlContent = str_replace("{{LOGO}}", $logoTag, $htmlContent);

    // Dompdf options
    $opts = new Options();
    $opts->set("isRemoteEnabled", true);
    $opts->set("isHtml5ParserEnabled", true);

    $dompdf = new Dompdf($opts);

    // HTML final
    $finalHtml = "<style>$cssContent</style>" . $htmlContent;

    $dompdf->loadHtml($finalHtml);
    $dompdf->setPaper("letter", "portrait");
    $dompdf->render();
    $dompdf->stream("reporte_mes_publico.pdf", ["Attachment" => false]);

} catch (Exception $e) {
    echo "<h2>Error:</h2>";
    echo "<pre>" . $e->getMessage() . "</pre>";
}

